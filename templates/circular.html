{% extends "base.html" %}

{% block content %}

<div class="header">
    <h1>Circular Management</h1>
</div>

<div class="form-box">
    <form method="POST" action="/create_circular" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="Title" required>
        <textarea name="description" placeholder="Description" required></textarea>
        <input type="date" name="date" required>
        <input type="text" name="priority" placeholder="Priority (Low/Medium/High)" required>
        <input type="file" name="file">
        <button type="submit">Submit</button>
    </form>
</div>

<div class="card">
    <h3>Existing Circulars</h3>

    <table border="1" width="100%">
        <tr>
            <th>Title</th>
            <th>Date</th>
            <th>Priority</th>
            <th>File</th>
            <th>View</th>
            <th>Delete</th>
        </tr>

        {% for circular in circulars %}
        <tr>
            <td>{{ circular[1] }}</td>
            <td>{{ circular[2] }}</td>
            <td>{{ circular[3] }}</td>
            <td>{{ circular[6] if circular[6] else 'N/A' }}</td>
            <td><a href="/read_circular/{{ circular[0] }}"><button>View</button></a></td>
            <td><a href="/delete_circular/{{ circular[0] }}"><button>Delete</button></a></td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}